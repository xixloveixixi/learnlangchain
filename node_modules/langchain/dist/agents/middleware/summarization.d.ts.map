{"version":3,"file":"summarization.d.ts","names":["__types_js0","z","BaseLanguageModel","InferInteropZodInput","contextSchema","_langchain_core_language_models_base0","BaseLanguageModelCallOptions","ZodTypeDef","ZodType","ZodNumber","ZodOptional","ZodDefault","ZodAny","ZodArray","ZodUnknown","ZodTuple","ZodPromise","ZodUnion","ZodFunction","ZodString","ZodTypeAny","Promise","ZodObject","SummarizationMiddlewareConfig","summarizationMiddleware","AgentMiddleware"],"sources":["../../../src/agents/middleware/summarization.d.ts"],"sourcesContent":["import { z } from \"zod/v3\";\nimport { BaseLanguageModel } from \"@langchain/core/language_models/base\";\nimport { InferInteropZodInput } from \"@langchain/core/utils/types\";\ndeclare const contextSchema: z.ZodObject<{\n    model: z.ZodType<string | BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>, z.ZodTypeDef, string | BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>>;\n    maxTokensBeforeSummary: z.ZodOptional<z.ZodNumber>;\n    messagesToKeep: z.ZodDefault<z.ZodNumber>;\n    tokenCounter: z.ZodOptional<z.ZodFunction<z.ZodTuple<[z.ZodArray<z.ZodAny, \"many\">], z.ZodUnknown>, z.ZodUnion<[z.ZodNumber, z.ZodPromise<z.ZodNumber>]>>>;\n    summaryPrompt: z.ZodDefault<z.ZodString>;\n    summaryPrefix: z.ZodDefault<z.ZodString>;\n}, \"strip\", z.ZodTypeAny, {\n    model: string | BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>;\n    maxTokensBeforeSummary?: number | undefined;\n    messagesToKeep: number;\n    tokenCounter?: ((args_0: any[], ...args: unknown[]) => number | Promise<number>) | undefined;\n    summaryPrompt: string;\n    summaryPrefix: string;\n}, {\n    model: string | BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>;\n    maxTokensBeforeSummary?: number | undefined;\n    messagesToKeep?: number | undefined;\n    tokenCounter?: ((args_0: any[], ...args: unknown[]) => number | Promise<number>) | undefined;\n    summaryPrompt?: string | undefined;\n    summaryPrefix?: string | undefined;\n}>;\nexport type SummarizationMiddlewareConfig = InferInteropZodInput<typeof contextSchema>;\n/**\n * Summarization middleware that automatically summarizes conversation history when token limits are approached.\n *\n * This middleware monitors message token counts and automatically summarizes older\n * messages when a threshold is reached, preserving recent messages and maintaining\n * context continuity by ensuring AI/Tool message pairs remain together.\n *\n * @param options Configuration options for the summarization middleware\n * @returns A middleware instance\n *\n * @example\n * ```ts\n * import { summarizationMiddleware } from \"langchain\";\n * import { createAgent } from \"langchain\";\n *\n * const agent = createAgent({\n *   llm: model,\n *   tools: [getWeather],\n *   middleware: [\n *     summarizationMiddleware({\n *       model: new ChatOpenAI({ model: \"gpt-4o\" }),\n *       maxTokensBeforeSummary: 4000,\n *       messagesToKeep: 20,\n *     })\n *   ],\n * });\n *\n * ```\n */\nexport declare function summarizationMiddleware(options: SummarizationMiddlewareConfig): import(\"./types.js\").AgentMiddleware<undefined, z.ZodObject<{\n    maxTokensBeforeSummary: z.ZodOptional<z.ZodNumber>;\n    messagesToKeep: z.ZodDefault<z.ZodNumber>;\n    tokenCounter: z.ZodOptional<z.ZodFunction<z.ZodTuple<[z.ZodArray<z.ZodAny, \"many\">], z.ZodUnknown>, z.ZodUnion<[z.ZodNumber, z.ZodPromise<z.ZodNumber>]>>>;\n    summaryPrompt: z.ZodDefault<z.ZodString>;\n    summaryPrefix: z.ZodDefault<z.ZodString>;\n} & {\n    model: z.ZodOptional<z.ZodType<BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>, z.ZodTypeDef, BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions>>>;\n}, \"strip\", z.ZodTypeAny, {\n    maxTokensBeforeSummary?: number | undefined;\n    messagesToKeep: number;\n    tokenCounter?: ((args_0: any[], ...args: unknown[]) => number | Promise<number>) | undefined;\n    summaryPrompt: string;\n    summaryPrefix: string;\n    model?: BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions> | undefined;\n}, {\n    maxTokensBeforeSummary?: number | undefined;\n    messagesToKeep?: number | undefined;\n    tokenCounter?: ((args_0: any[], ...args: unknown[]) => number | Promise<number>) | undefined;\n    summaryPrompt?: string | undefined;\n    summaryPrefix?: string | undefined;\n    model?: BaseLanguageModel<any, import(\"@langchain/core/language_models/base\").BaseLanguageModelCallOptions> | undefined;\n}>, any>;\nexport {};\n"],"mappings":"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"}